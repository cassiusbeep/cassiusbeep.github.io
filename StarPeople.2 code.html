<pre><font color="#007f69">breed</font><font color="#000000"> [b-reds b-red]<br /></font><font color="#660096">breed</font><font color="#000000"> [b-blues b-blue]<br /></font><font color="#660096">breed</font><font color="#000000"> [tables table]<br /><br /></font><font color="#007f69">b-reds-own</font><font color="#000000"> [<br />  happy<br />  groupnum<br />  status<br />  at-table<br />]<br /></font><font color="#007f69">b-blues-own</font><font color="#000000"> [<br />  happy<br />  groupnum<br />  status<br />  at-table<br />]<br /></font><font color="#007f69">tables-own</font><font color="#000000"> [<br />  table-num<br />]<br /></font><font color="#007f69">globals</font><font color="#000000"> [<br />  group-rad<br />  next-groupnum<br />  waitspeeds<br />  gospeeds<br />  ppl-per-table<br />  end-after<br />]<br /><br /></font><font color="#5a5a5a">;; new model with simplified spatial distribution</font><font color="#000000"><br /></font><font color="#5a5a5a">;; randomly distribute around the room</font><font color="#000000"><br /></font><font color="#5a5a5a">;; everyone goes toward their nearest meeting point</font><font color="#000000"><br /></font><font color="#5a5a5a">;; same calculation process as last model</font><font color="#000000"><br /></font><font color="#5a5a5a">;; if they're unhappy they move to the next table</font><font color="#000000"><br /></font><font color="#5a5a5a">;; if a table has a free chair they'll sit and see if they're happy</font><font color="#000000"><br /></font><font color="#5a5a5a">;; we'd want a rectangular room</font><font color="#000000"><br /><br /></font><font color="#5a5a5a">;; experiment with a losers table - after a certain number of rounds with no happiness they go to the loser table</font><font color="#000000"><br /><br /></font><font color="#5a5a5a">;; overall aim is to make the schelling model into an exercise where people are agents!</font><font color="#000000"><br /></font><font color="#5a5a5a">;; so trying to make it more adaptable for a real life space</font><font color="#000000"><br /><br /></font><font color="#5a5a5a">;; is it possible to do the layout-circle without changing the order of the agents around the table?</font><font color="#000000"><br /></font><font color="#5a5a5a">;; questions about how they are ordered within this group</font><font color="#000000"><br /></font><font color="#5a5a5a">;; could they be spaced out randomly within a group?</font><font color="#000000"><br /></font><font color="#5a5a5a">;; right now we only look at the ratio</font><font color="#000000"><br /></font><font color="#5a5a5a">;; could maybe look at other aspects that describe segregation?</font><font color="#000000"><br /></font><font color="#5a5a5a">;; what ratio is well-balanced vs segregated?? segregation is kinda just when its all the same right?</font><font color="#000000"><br /><br /></font><font color="#5a5a5a">;; use behaviorspace to run the sim from threshold = 1/3 to threshold = 1/2</font><font color="#000000"><br /></font><font color="#5a5a5a">;; try and find a tipping point?</font><font color="#000000"><br /></font><font color="#5a5a5a">;;;; what should i measure for each run of the sim?</font><font color="#000000"><br /></font><font color="#5a5a5a">;;;;;; how many ticks it takes for everyone to be happy</font><font color="#000000"><br /></font><font color="#5a5a5a">;;;;;; average ratio of red to blue in each group</font><font color="#000000"><br /></font><font color="#5a5a5a">;;;;;; repeat each</font><font color="#000000"><br /><br /></font><font color="#5a5a5a">;; add a toggle to let agents move to a random table rather than just the next one -</font><font color="#000000"><br /></font><font color="#5a5a5a">;;; for the inverted threshold we have a problem where everyone is moving together so no one is happy.</font><font color="#000000"><br /><br /></font><font color="#5a5a5a">;;;; using proportion vs absolute number of groupmates affects:</font><font color="#000000"><br /></font><font color="#5a5a5a">; how easy it is for people to calculate</font><font color="#000000"><br /></font><font color="#5a5a5a">; how to decide if you're happy in a group on your own</font><font color="#000000"><br /></font><font color="#5a5a5a">; using absolute means it doesn't scale with the total number of people</font><font color="#000000"><br /><br /></font><font color="#5a5a5a">; how can wanting an exact ratio impact the result (</font><font color="#000000"><br /><br /></font><font color="#5a5a5a">; could adjust the schelling model to add our mindiff rule and see how that affects the results!</font><font color="#000000"><br /><br /></font><font color="#5a5a5a">;; not make it with ratio? something indirect. more with neighbours -</font><font color="#000000"><br /><br /><br /></font><font color="#007f69">to</font><font color="#000000"> setup<br />  </font><font color="#0000aa">clear-all</font><font color="#000000"><br />  </font><font color="#0000aa">set</font><font color="#000000"> group-rad </font><font color="#963700">1</font><font color="#000000"><br />  </font><font color="#0000aa">set</font><font color="#000000"> waitspeeds [</font><font color="#963700">4</font><font color="#000000"> </font><font color="#963700">2.5</font><font color="#000000"> </font><font color="#963700">1.5</font><font color="#000000"> </font><font color="#963700">0.75</font><font color="#000000"> </font><font color="#963700">0.25</font><font color="#000000">]<br />  </font><font color="#0000aa">set</font><font color="#000000"> gospeeds [</font><font color="#963700">0.025</font><font color="#000000"> </font><font color="#963700">0.01</font><font color="#000000"> </font><font color="#963700">0.0075</font><font color="#000000"> </font><font color="#963700">0.005</font><font color="#000000"> </font><font color="#963700">0.0025</font><font color="#000000">]<br />  </font><font color="#0000aa">set</font><font color="#000000"> end-after </font><font color="#963700">9</font><font color="#000000"><br />  create-tables num-of-groups [<br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;house&quot;</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">2.5</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">white</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> table-num </font><font color="#660096">who</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">label</font><font color="#000000"> table-num<br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">ycor</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">xcor</font><font color="#000000"> ((table-num </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) </font><font color="#660096">*</font><font color="#000000"> (</font><font color="#660096">world-width</font><font color="#000000"> </font><font color="#660096">/</font><font color="#000000"> (num-of-groups </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">)))<br />  ]<br />  </font><font color="#0000aa">set</font><font color="#000000"> ppl-per-table </font><font color="#660096">ceiling</font><font color="#000000"> (num-turtles </font><font color="#660096">/</font><font color="#000000"> num-of-groups)<br />  </font><font color="#0000aa">let</font><font color="#000000"> group-list []<br />  </font><font color="#0000aa">repeat</font><font color="#000000"> num-of-groups [<br />    </font><font color="#0000aa">set</font><font color="#000000"> group-list </font><font color="#660096">lput</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> group-list<br />  ]<br />  create-b-reds num-turtles </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> [<br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;circle&quot;</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> happy </font><font color="#963700">false</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> groupnum (</font><font color="#660096">random</font><font color="#000000"> num-of-groups)<br />    </font><font color="#0000aa">while</font><font color="#000000"> ([</font><font color="#660096">item</font><font color="#000000"> groupnum group-list </font><font color="#660096">&gt;=</font><font color="#000000"> ppl-per-table]) [<br />      </font><font color="#0000aa">set</font><font color="#000000"> groupnum (</font><font color="#660096">random</font><font color="#000000"> num-of-groups)<br />    ]<br />    </font><font color="#0000aa">set</font><font color="#000000"> group-list </font><font color="#660096">replace-item</font><font color="#000000"> groupnum group-list (</font><font color="#660096">item</font><font color="#000000"> groupnum group-list </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">)<br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">0.7</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">red</font><font color="#000000"><br />    </font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">random-xcor</font><font color="#000000"> </font><font color="#660096">random-ycor</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">360</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> status </font><font color="#963700">&quot;&quot;</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> at-table </font><font color="#963700">false</font><font color="#000000"><br />  ]<br />  create-b-blues num-turtles </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> [<br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;triangle&quot;</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> happy </font><font color="#963700">false</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> groupnum (</font><font color="#660096">random</font><font color="#000000"> num-of-groups)<br />    </font><font color="#0000aa">while</font><font color="#000000"> ([</font><font color="#660096">item</font><font color="#000000"> groupnum group-list </font><font color="#660096">&gt;=</font><font color="#000000"> ppl-per-table]) [<br />      </font><font color="#0000aa">set</font><font color="#000000"> groupnum (</font><font color="#660096">random</font><font color="#000000"> num-of-groups)<br />    ]<br />    </font><font color="#0000aa">set</font><font color="#000000"> group-list </font><font color="#660096">replace-item</font><font color="#000000"> groupnum group-list (</font><font color="#660096">item</font><font color="#000000"> groupnum group-list </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">)<br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">0.7</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">blue</font><font color="#000000"><br />    </font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">random-xcor</font><font color="#000000"> </font><font color="#660096">random-ycor</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">360</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> status </font><font color="#963700">&quot;&quot;</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> at-table </font><font color="#963700">false</font><font color="#000000"><br />  ]<br />  </font><font color="#0000aa">reset-ticks</font><font color="#000000"><br />  go-once<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> go<br />  </font><font color="#0000aa">if</font><font color="#000000"> (</font><font color="#660096">count</font><font color="#000000"> (</font><font color="#660096">turtles</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">breed</font><font color="#000000"> </font><font color="#660096">!=</font><font color="#000000"> tables </font><font color="#660096">and</font><font color="#000000"> status </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;:&gt;&quot;</font><font color="#000000">])) </font><font color="#660096">=</font><font color="#000000"> num-turtles [<br />    </font><font color="#0000aa">stop</font><font color="#000000"><br />  ]<br />  go-once<br />  </font><font color="#0000aa">if</font><font color="#000000"> (</font><font color="#660096">ticks</font><font color="#000000"> </font><font color="#660096">&gt;</font><font color="#000000"> end-after) [<br />    </font><font color="#0000aa">stop</font><font color="#000000"><br />  ]<br /></font><font color="#5a5a5a">;  wait (item (simulation-speed - 1) waitspeeds)</font><font color="#000000"><br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> go-once<br />  move-to-next-table<br />  </font><font color="#0000aa">let</font><font color="#000000"> x (</font><font color="#660096">range</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> num-of-groups)<br />  </font><font color="#0000aa">foreach</font><font color="#000000"> x [ a -&gt;<br />    </font><font color="#0000aa">layout-circle</font><font color="#000000"> (</font><font color="#660096">turtles</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [(</font><font color="#660096">breed</font><font color="#000000"> </font><font color="#660096">!=</font><font color="#000000"> tables) </font><font color="#660096">and</font><font color="#000000"> (groupnum </font><font color="#660096">=</font><font color="#000000"> a)]) (group-rad </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">0.75</font><font color="#000000">)<br />    </font><font color="#0000aa">ask</font><font color="#000000"> (</font><font color="#660096">turtles</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [(</font><font color="#660096">breed</font><font color="#000000"> </font><font color="#660096">!=</font><font color="#000000"> tables) </font><font color="#660096">and</font><font color="#000000"> (groupnum </font><font color="#660096">=</font><font color="#000000"> a)]) [<br />      </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">xcor</font><font color="#000000"> ((groupnum </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) </font><font color="#660096">*</font><font color="#000000"> (</font><font color="#660096">world-width</font><font color="#000000"> </font><font color="#660096">/</font><font color="#000000"> (num-of-groups </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">))) </font><font color="#660096">+</font><font color="#000000"> (</font><font color="#660096">xcor</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> (</font><font color="#660096">world-width</font><font color="#000000"> </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">) </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">0.4</font><font color="#000000">)<br />    ]<br />  ]<br />  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">breed</font><font color="#000000"> </font><font color="#660096">!=</font><font color="#000000"> tables] [<br />    check-neighbours<br />  ]<br />  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">breed</font><font color="#000000"> </font><font color="#660096">!=</font><font color="#000000"> tables] [<br />    </font><font color="#0000aa">ifelse</font><font color="#000000"> show-status [</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">label</font><font color="#000000"> status][</font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">label</font><font color="#000000"> </font><font color="#963700">&quot;&quot;</font><font color="#000000">]<br />  ]<br />  </font><font color="#0000aa">tick</font><font color="#000000"><br />  </font><font color="#0000aa">if</font><font color="#000000"> (</font><font color="#660096">ticks</font><font color="#000000"> </font><font color="#660096">&gt;</font><font color="#000000"> end-after) [<br />    </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">breed</font><font color="#000000"> </font><font color="#660096">!=</font><font color="#000000"> tables </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">not</font><font color="#000000"> happy] [<br />      </font><font color="#0000aa">die</font><font color="#000000"><br />    ]<br />  ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> move-to-next-table<br />  </font><font color="#5a5a5a">;; while there are still turtles looking for a table</font><font color="#000000"><br />    </font><font color="#0000aa">while</font><font color="#000000"> [(</font><font color="#660096">count</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [(</font><font color="#660096">breed</font><font color="#000000"> </font><font color="#660096">!=</font><font color="#000000"> tables) </font><font color="#660096">and</font><font color="#000000"> at-table]) </font><font color="#660096">&lt;</font><font color="#000000"> num-turtles] [<br />      </font><font color="#5a5a5a">;; tell each turtle that's still looking for a table</font><font color="#000000"><br />      </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [(</font><font color="#660096">breed</font><font color="#000000"> </font><font color="#660096">!=</font><font color="#000000"> tables) </font><font color="#660096">and</font><font color="#000000"> (</font><font color="#660096">not</font><font color="#000000"> at-table)] [<br />        </font><font color="#5a5a5a">;; point at the next table</font><font color="#000000"><br />        </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> (</font><font color="#660096">towards</font><font color="#000000"> table groupnum)<br />        </font><font color="#5a5a5a">;; move a bit towards it</font><font color="#000000"><br />        </font><font color="#0000aa">fd</font><font color="#000000"> </font><font color="#963700">0.2</font><font color="#000000"><br />        </font><font color="#5a5a5a">;; check if we're there -- if we are, set at-table to true. (stop looking)</font><font color="#000000"><br />        </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">distance</font><font color="#000000"> (table groupnum) </font><font color="#660096">&lt;</font><font color="#000000"> group-rad [<br />          </font><font color="#0000aa">set</font><font color="#000000"> at-table </font><font color="#963700">true</font><font color="#000000"><br />        ]<br />      ]<br />      </font><font color="#5a5a5a">; move each person one bit at a time so it looks like everyone moves in sync</font><font color="#000000"><br />      </font><font color="#5a5a5a">; waiting a tiny sec between each move simulates smooth movement without ticks</font><font color="#000000"><br /></font><font color="#5a5a5a">;      wait (item (simulation-speed - 1) gospeeds)</font><font color="#000000"><br />    ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> check-neighbours<br />  </font><font color="#5a5a5a">;; everyone is at-table</font><font color="#000000"><br />  </font><font color="#0000aa">let</font><font color="#000000"> tablemates </font><font color="#963700">1</font><font color="#000000"><br />  </font><font color="#0000aa">let</font><font color="#000000"> tablenomates </font><font color="#963700">1</font><font color="#000000"><br /><br />  </font><font color="#0000aa">ifelse</font><font color="#000000"> </font><font color="#660096">breed</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> b-reds [  </font><font color="#5a5a5a">;; find ratio of us vs them</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> tablemates </font><font color="#660096">count</font><font color="#000000"> (b-reds </font><font color="#660096">with</font><font color="#000000"> [groupnum </font><font color="#660096">=</font><font color="#000000"> [groupnum] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">myself</font><font color="#000000">])<br />    </font><font color="#0000aa">set</font><font color="#000000"> tablenomates </font><font color="#660096">count</font><font color="#000000"> (b-blues </font><font color="#660096">with</font><font color="#000000"> [groupnum </font><font color="#660096">=</font><font color="#000000"> [groupnum] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">myself</font><font color="#000000">])<br />  ][<br />    </font><font color="#0000aa">set</font><font color="#000000"> tablemates </font><font color="#660096">count</font><font color="#000000"> (b-blues </font><font color="#660096">with</font><font color="#000000"> [groupnum </font><font color="#660096">=</font><font color="#000000"> [groupnum] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">myself</font><font color="#000000">])<br />    </font><font color="#0000aa">set</font><font color="#000000"> tablenomates </font><font color="#660096">count</font><font color="#000000"> (b-reds </font><font color="#660096">with</font><font color="#000000"> [groupnum </font><font color="#660096">=</font><font color="#000000"> [groupnum] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">myself</font><font color="#000000">])<br />  ]<br /><br />  </font><font color="#0000aa">ifelse</font><font color="#000000"> (tablenomates </font><font color="#660096">+</font><font color="#000000"> tablemates </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">) [</font><font color="#0000aa">set</font><font color="#000000"> happy </font><font color="#963700">true</font><font color="#000000">][<br />    </font><font color="#0000aa">set</font><font color="#000000"> happy ((tablemates </font><font color="#660096">/</font><font color="#000000"> (tablemates </font><font color="#660096">+</font><font color="#000000"> tablenomates)) </font><font color="#660096">&gt;=</font><font color="#000000"> min-same)<br />    </font><font color="#0000aa">if</font><font color="#000000"> (happy) [<br />      </font><font color="#0000aa">set</font><font color="#000000"> happy ((tablenomates </font><font color="#660096">/</font><font color="#000000"> (tablemates </font><font color="#660096">+</font><font color="#000000"> tablenomates)) </font><font color="#660096">&gt;=</font><font color="#000000"> min-diff)<br />    ]<br />  ]<br />  </font><font color="#0000aa">if</font><font color="#000000"> (</font><font color="#660096">count</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">breed</font><font color="#000000"> </font><font color="#660096">!=</font><font color="#000000"> tables </font><font color="#660096">and</font><font color="#000000"> groupnum </font><font color="#660096">=</font><font color="#000000"> [groupnum] </font><font color="#660096">of</font><font color="#000000"> </font><font color="#660096">myself</font><font color="#000000">] </font><font color="#660096">&gt;</font><font color="#000000"> ppl-per-table) [</font><font color="#0000aa">set</font><font color="#000000"> happy </font><font color="#963700">false</font><font color="#000000">]<br /><br />  </font><font color="#0000aa">if</font><font color="#000000"> status </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">&quot;-.-&quot;</font><font color="#000000"> [<br />    </font><font color="#5a5a5a">;; if happy, set status to :&gt;. if not, set intention to look for a new table on next tick.</font><font color="#000000"><br />    </font><font color="#0000aa">ifelse</font><font color="#000000"> happy [<br />      </font><font color="#0000aa">set</font><font color="#000000"> status </font><font color="#963700">&quot;:&gt;&quot;</font><font color="#000000"><br />      </font><font color="#0000aa">create-link-with</font><font color="#000000"> table groupnum<br />    ][<br />      </font><font color="#0000aa">set</font><font color="#000000"> status </font><font color="#963700">&quot;:&lt;&quot;</font><font color="#000000"><br />      </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">my-links</font><font color="#000000"> [</font><font color="#0000aa">die</font><font color="#000000">]<br />      </font><font color="#0000aa">set</font><font color="#000000"> groupnum (</font><font color="#660096">random</font><font color="#000000"> num-of-groups)<br />      </font><font color="#0000aa">set</font><font color="#000000"> at-table </font><font color="#963700">false</font><font color="#000000"><br />    ]<br />  ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#5a5a5a">;      while ([count turtles with [breed != tables and groupnum = [groupnum] of myself] &gt;= ppl-per-table]) [</font><font color="#000000"><br /></font><font color="#5a5a5a">;        set groupnum (random num-of-groups)</font><font color="#000000"><br /></font><font color="#5a5a5a">;      ]</font>
</pre>
